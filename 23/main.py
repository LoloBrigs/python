import os
import sys
from game import Game


def main_menu():
    print("\n" + "="*60)
    print("üöÅ –ü–û–ñ–ê–†–ù–´–ô –í–ï–†–¢–û–õ–ï–¢ üî•")
    print("="*60)
    print("\n1. –ù–æ–≤–∞—è –∏–≥—Ä–∞")
    print("2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É")
    print("3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã")
    print("4. –ü–æ–º–æ—â—å")
    print("5. –í—ã—Ö–æ–¥")

    choice = input("\n–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –º–µ–Ω—é: ").strip()
    return choice


def show_help():
    os.system('cls' if os.name == 'nt' else 'clear')
    print("\n" + "="*60)
    print("üìñ –°–ü–†–ê–í–ö–ê")
    print("="*60)
    print("\nüéØ –¶–ï–õ–¨ –ò–ì–†–´:")
    print("–¢—É—à–∏—Ç–µ –ø–æ–∂–∞—Ä—ã, —Å–ø–∞—Å–∞–π—Ç–µ –ª–µ—Å –æ—Ç –æ–≥–Ω—è, –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—á–∫–∏!")

    print("\nüïπÔ∏è  –£–ü–†–ê–í–õ–ï–ù–ò–ï:")
    print("  W/–¶ - –≤–≤–µ—Ä—Ö")
    print("  A/–§ - –≤–ª–µ–≤–æ")
    print("  S/–´ - –≤–Ω–∏–∑")
    print("  D/–í - –≤–ø—Ä–∞–≤–æ")
    print("  E/–£ - –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–∞–±—Ä–∞—Ç—å –≤–æ–¥—É, –ø–æ—Ç—É—à–∏—Ç—å –æ–≥–æ–Ω—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–¥–∞–Ω–∏–µ)")
    print("  Q/–ô - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É")
    print("  X/–ß - –≤—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã")

    print("\nüó∫Ô∏è  –ö–ê–†–¢–ê:")
    print("  üöÅ - –≤–∞—à –≤–µ—Ä—Ç–æ–ª–µ—Ç")
    print("  üå≤ - –¥–µ—Ä–µ–≤–æ")
    print("  üî• - –ø–æ–∂–∞—Ä (—Ç—É—à–∏—Ç–µ –µ–≥–æ!)")
    print("  üåä - —Ä–µ–∫–∞ (–Ω–∞–±–∏—Ä–∞–π—Ç–µ –≤–æ–¥—É)")
    print("  üü´ - —Å–≥–æ—Ä–µ–≤—à–µ–µ –¥–µ—Ä–µ–≤–æ")
    print("  üè• - –≥–æ—Å–ø–∏—Ç–∞–ª—å (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è)")
    print("  üè™ - –º–∞–≥–∞–∑–∏–Ω (–ø–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π)")
    print("  ‚òÅÔ∏è  - –æ–±–ª–∞–∫–æ")

    print("\n‚ö° –ú–ï–•–ê–ù–ò–ö–ò:")
    print("  - –î–µ—Ä–µ–≤—å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–≥–æ—Ä–∞—é—Ç—Å—è")
    print("  - –ü–æ–∂–∞—Ä –º–æ–∂–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–µ –¥–µ—Ä–µ–≤—å—è")
    print("  - –û–±–ª–∞–∫–∞ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –≥—Ä–æ–∑—É –∏ –º–æ–ª–Ω–∏—é")
    print("  - –ú–æ–ª–Ω–∏—è –º–æ–∂–µ—Ç –ø–æ–¥–∂–µ—á—å –¥–µ—Ä–µ–≤–æ")
    print("  - –ú–Ω–æ–≥–æ –æ–±–ª–∞–∫–æ–≤ = –¥–æ–∂–¥—å (—Ç—É—à–∏—Ç –ø–æ–∂–∞—Ä—ã)")
    print("  - –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –ø–æ–∂–∞—Ä–µ –º–æ–∂–µ—Ç –ø–æ–≤—Ä–µ–¥–∏—Ç—å –≤–µ—Ä—Ç–æ–ª–µ—Ç")
    print("  - –ù–æ–≤—ã–µ –¥–µ—Ä–µ–≤—å—è –≤—ã—Ä–∞—Å—Ç–∞—é—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º")

    print("\nüí∞ –û–ß–ö–ò:")
    print("  +100 –∑–∞ –ø–æ—Ç—É—à–µ–Ω–Ω—ã–π –ø–æ–∂–∞—Ä")
    print("  -50 –∑–∞ —Å–≥–æ—Ä–µ–≤—à–µ–µ –¥–µ—Ä–µ–≤–æ")
    print("  -25 –∑–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ–≥–Ω—è")

    print("\nüè™ –ú–ê–ì–ê–ó–ò–ù:")
    print("  - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤–æ–¥—ã: 500 –æ—á–∫–æ–≤")

    print("\nüè• –ì–û–°–ü–ò–¢–ê–õ–¨:")
    print("  - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ 1 –∂–∏–∑–Ω–∏: 200 –æ—á–∫–æ–≤")

    print("\n" + "="*60)
    input("\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é...")


def get_map_size():
    os.system('cls' if os.name == 'nt' else 'clear')
    print("\n" + "="*60)
    print("‚öôÔ∏è  –ù–ê–°–¢–†–û–ô–ö–ò –ö–ê–†–¢–´")
    print("="*60)

    try:
        width = int(input("\n–í–≤–µ–¥–∏—Ç–µ —à–∏—Ä–∏–Ω—É –∫–∞—Ä—Ç—ã (10-40, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20): ").strip() or "20")
        height = int(input("–í–≤–µ–¥–∏—Ç–µ –≤—ã—Å–æ—Ç—É –∫–∞—Ä—Ç—ã (10-30, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15): ").strip() or "15")

        width = max(10, min(40, width))
        height = max(10, min(30, height))

        return width, height
    except ValueError:
        print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥! –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.")
        return 20, 15


def main():
    width, height = 20, 15

    while True:
        os.system('cls' if os.name == 'nt' else 'clear')
        choice = main_menu()

        if choice == '1':
            game = Game()
            game.initialize_game(width, height)
            game.run()

        elif choice == '2':
            game = Game()
            if game.load_game():
                print("\n‚úÖ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!")
                input("–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...")
                game.run()
            else:
                print("\n‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É!")
                input("–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é...")

        elif choice == '3':
            width, height = get_map_size()
            print(f"\n‚úÖ –†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: {width}x{height}")
            input("–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é...")

        elif choice == '4':
            show_help()

        elif choice == '5':
            print("\nüëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
            break

        else:
            print("\n‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä!")
            input("–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...")


if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\n\nüëã –ò–≥—Ä–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞. –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
        sys.exit(0)
